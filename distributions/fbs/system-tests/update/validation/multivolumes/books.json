[
    {
        "name": "main-book",
        "description": "Tester en komplet hovedpost",
        "request": {
            "authentication": {
                "group": "761500",
                "user": "netpunkt",
                "password": "20Koster"
            },
            "templateName": "boghoved",
            "record": "main.marc"
        },
        "expected": {
            "validation": []
        }
    },
    {
        "name": "volume-book-no-main",
        "description": "Tester en komplet bindpost uden hovedpost i rawrepo",
        "request": {
            "authentication": {
                "group": "761500",
                "user": "netpunkt",
                "password": "20Koster"
            },
            "templateName": "bogbind",
            "record": "volume.marc"
        },
        "expected": {
            "validation": [
                {
                    "type": "ERROR",
                    "params": {
                        "param": [
                            {
                                "key": "fieldno",
                                "value": 4
                            },
                            {
                                "key": "subfieldno",
                                "value": 1
                            },
                            {
                                "key": "message",
                                "value": "Posten med faustnr/bibliotek '51617649/870970' findes ikke i forvejen"
                            },
                            {
                                "key": "url",
                                "value": "http://www.kat-format.dk/danMARC2/Danmarc2.f.htm"
                            },
                            {
                                "value": "51586417:870970",
                                "key": "pid"
                            }
                        ]
                    }
                }
            ]
        }
    },
    {
        "name": "volume-book-with-main",
        "description": "Tester en komplet bindpost med hovedpost i rawrepo",
        "setup": {
            "rawrepo": [
                {
                    "record": "rawrepo-main.marc",
                    "type": "MARCXCHANGE",
                    "deleted": false
                }
            ]
        },
        "request": {
            "authentication": {
                "group": "761500",
                "user": "netpunkt",
                "password": "20Koster"
            },
            "templateName": "bogbind",
            "record": "volume.marc"
        },
        "expected": {
            "validation": [
                {
                    "type": "ERROR",
                    "params": {
                        "param": [
                            {
                                "key": "fieldno",
                                "value": 3
                            },
                            {
                                "key": "subfieldno",
                                "value": 5
                            },
                            {
                                "key": "message",
                                "value": "Delfelt 008o må ikke anvendes i posten '51617649', da delfeltet allerede er anvendt i flerbindsværket"
                            },
                            {
                                "key": "url",
                                "value": "http://www.kat-format.dk/danMARC2/Danmarc2.9.htm"
                            },
                            {
                                "value": "51586417:870970",
                                "key": "pid"
                            }
                        ]
                    }
                }
            ]
        }
    }
]
